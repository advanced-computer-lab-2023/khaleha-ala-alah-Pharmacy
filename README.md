# Khaleeha Ala Allah Pharmacy Management System

The Khaleeha Ala Allah Pharmacy Management System is a comprehensive web application designed to streamline pharmacy operations for administrators, patients, and pharmacists. This project aims to enhance efficiency in medication management, order processing, and inventory control. By providing a user-friendly interface, the system ensures seamless communication between different user roles, ultimately improving the overall pharmacy experience. Join us in modernizing pharmacy management for a more connected and efficient healthcare environment.

# Motivation

The inspiration for the Khaleeha Ala Allah Pharmacy Management System stemmed from the need to revolutionize and enhance the efficiency of pharmacy operations. In today's dynamic healthcare landscape, a seamless and well-integrated platform is essential for both healthcare providers and patients.

We recognized the challenges faced by administrators, patients, and pharmacists in managing pharmacy-related tasks efficiently. The aim of this project is to bridge these gaps by providing a user-friendly, centralized system that streamlines processes, enhances communication, and ultimately improves the overall pharmacy experience.

By developing the Khaleeha Ala Allah platform, we aspire to contribute to the modernization of pharmacy management, empowering healthcare professionals, and ensuring that patients receive the best possible care. Our commitment lies in creating a solution that not only meets current needs but also anticipates future challenges in the ever-evolving healthcare landscape.

# Code Style
The code style is enforced using eslint and prettier. The code style is enforced using pre-commit hooks and pre-commit GitHub action.

# Screenshots

![WhatsApp Image 2023-12-15 at 9 28 00 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/7032afdd-016c-47a0-b123-e95f021ba59f)


The image above presents the initial user authentication gateway of Khaleeha Ala Allah online pharmacy platform. This secure login portal is designed to provide a straightforward yet secure access point for both patients and pharmacists.

Features of the Login Screen:

- Focused Design: With a clear and distraction-free layout against a blurred background, the login form is centered on the page to draw user attention directly to the credential input fields.
- Intuitive Input Fields: Users can effortlessly input their credentials into the designated 'Username' and 'Password' fields, with a subtle interplay of shadows and highlights that enhance the text's readability.
- Distinctive Call-to-Action: The 'Login' button is prominently styled with a bold color, indicating the next step in the authentication process.
- Registration Links: Directly below the main action button, new users are given the option to 'Register as a patient' or 'Register as a pharmacist', demonstrating the platform's dual-service approach.
- Password Recovery: A 'Forgot Password' link offers quick assistance to users needing to reset their credentials, emphasizing the platform's commitment to user support and security.

The login interface is the first interaction users have with "Khaleeha Ala Allah" platform, setting the tone for a user-friendly, secure, and professional experience.

![WhatsApp Image 2023-12-15 at 9 28 00 PM (1)](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/3d482008-93fb-47fe-a38c-0ff1bf427ee0)

The above image illustrates the 'Registration' page for patients on Khaleeha Ala Allah online pharmacy platform. This form is the starting point for patients to create their personal accounts, allowing them to access a wide range of online pharmacy services.

Features of the Registration Form:

- Comprehensive Data Collection: The form is designed to collect all necessary information from patients in a structured manner, including Full Name, Username, Email, Phone Number, Password, Date of Birth, and Gender, ensuring that the profile is both complete and accurate.
- Emergency Contact Information: A thoughtful addition to the form is the inclusion of an 'Emergency Contact' section, asking for the Full Name and Phone Number of someone who can be reached if needed, underscoring the platform's commitment to patient safety.
- User-Friendly Interface: Each input field is clearly labeled, and the layout is intuitive, minimizing the chance of user error during the registration process.
- Privacy First: Password fields mask input to protect user privacy, even on the registration screen.
- Seamless Integration: The placement of the registration form over a background of medication capsules subtly reinforces the platform's medical context while not detracting from the clarity of the form itself.
- Final Call-to-Action: A bold 'REGISTER' button at the bottom of the form serves as a clear final step for users to complete their sign-up, ensuring a smooth transition into the platform's services.

This registration interface is carefully crafted to ensure that the process of joining Khaleeha Ala Allah online pharmacy is as seamless and user-friendly as possible, setting the stage for a secure and personalized healthcare shopping experience.

![WhatsApp Image 2023-12-15 at 9 27 59 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/7a6a5c99-2d35-4f06-9214-2edecd7b981d)

Displayed above is the 'Registration' page specifically designed for doctors on Khaleeha Ala Allah online pharmacy platform. This interface is crafted to gather detailed professional information from medical practitioners who wish to affiliate with the platform.

Key Elements of the Doctor Registration Form:

- Personal and Professional Details: The form captures a blend of personal information (Full Name, Email, Password, Date of Birth) and professional details (Username, Hourly Rate, Affiliation, Specialty) to create a comprehensive profile.
- Credential Verification: There is a field for 'Educational Background' and an 'Upload File(s)' option, allowing doctors to provide and upload qualifications and certifications, which reinforces the platform's dedication to maintaining a network of verified medical professionals.
- Contractual Agreement: A checkbox stating, "I agree to the terms of the contract" paired with a 'View Contract' link ensures transparency and consent to the platform's terms of service before registration is completed.
- Focused User Journey: The 'REGISTER' button is strategically positioned as a clear call to action, inviting doctors to finalize their registration and join the platform.
- Visual Context: The background image, softly blurred, depicts a clinical setting, aligning with the medical theme and subtly reinforcing the professional atmosphere of the platform.

This registration form is meticulously tailored to ensure a seamless onboarding process for doctors, facilitating their integration into Khaleeha Ala Allah platform, where they can offer their expertise to a broader patient community.

![WhatsApp Image 2023-12-15 at 9 27 54 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/360f0094-1123-418c-9738-f9e20aee50fe)

The image above displays the "Forgot Password" recovery page for Khaleeha Ala Allah online pharmacy platform. This feature provides a vital function for users who have lost or forgotten their account password.

Functionality of the Forgot Password Page:

- Simple Recovery Process: The page offers a minimalistic design where users are prompted to enter their username into a single field, making the password recovery process as straightforward as possible.
- Direct Assistance: After entering their username, users can click the 'Send Email' button, which triggers an automated process to send a password reset link to the user's registered email address.
- User-Friendly Interface: The clean interface, free of distractions, focuses the user's attention on the task at hand, reducing any potential stress associated with forgetting a password.
- Security Measures: The process is designed to securely verify the user's identity without exposing sensitive information, ensuring that only the rightful account owner can reset the password.

This "Forgot Password" function is an essential aspect of the user experience, providing users with a quick and secure method to regain access to their accounts on SKhaleeha Ala Allah platform.

![WhatsApp Image 2023-12-15 at 3 18 13 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/e2aa02db-d22d-4dcf-ad9c-092ecb8e6c95)

This image showcases the home page of Khaleeha Ala Allah pharmacy platform for patients. It illustrates a user-friendly interface where customers can easily browse and purchase medicines. The page displays a selection of over-the-counter medications, such as 'Comtrex' and 'Panadol', with clear images, prices in EGP (Egyptian Pound), and available quantities. Each product has a dedicated 'Details' button that leads to a more comprehensive description, and an 'Add to Cart' button for straightforward shopping convenience.

The page also contains an innovative feature on the left side of the online pharmacy platform: a dynamic filtering menu categorized under 'Medical Uses'. This menu allows users to filter the displayed products based on specific medical needs such as cough, eye conditions, and pain relief, among others. Each category is listed as a clickable option that, when selected, refines the product display to show only items relevant to the selected condition. This targeted browsing capability enables customers to navigate the inventory with ease and find products suited to their health requirements. The filter menu's presence alongside the product listings demonstrates the platform's commitment to a user-centric shopping experience, making it straightforward for customers to access a personalized assortment of medicines.

The navigation bar at the top allows users to quickly access other sections like Home, Orders, Cart, and Chat, ensuring a seamless online shopping experience. This design emphasizes simplicity and efficiency, aiming to provide a hassle-free process for users to find and buy the medical supplies they need.

![WhatsApp Image 2023-12-15 at 3 19 07 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/cc5960d5-2e90-4868-a43a-22af5586db89)


This image presents the 'Orders' section of Khaleeha Ala Allah pharmacy platform, which is accessible via the upper menu bar. It features a clean and organized layout where customers can view their current and past orders. Each order is displayed with a thumbnail image of the product, the medicine's name, the quantity purchased, and the total price.

A noteworthy aspect of this page is the 'Filter by Status' dropdown menu located on the right side, which includes options such as 'All', 'Pending', 'Processing', 'Cancelled', and 'Delivered'. This allows users to sort their orders based on the status, making it easy to track the progress of current orders or review past ones. For instance, selecting 'Pending' would display orders that are yet to be processed, while 'Delivered' would show those that have already been received.

Each order block also includes the total amount and the status of the order, such as 'Pending', to indicate the current phase of the order process. For orders that are not yet finalized, there is a 'Cancel Order' button, providing customers with the flexibility to modify their orders before they are processed. This user-centric design caters to a convenient and efficient order management system, enhancing the overall customer experience on the platform.

![WhatsApp Image 2023-12-15 at 3 24 13 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/526fe472-f8aa-4e8c-bd39-709a129d3640)

The image presents the 'Cart' interface of Khaleeha Ala Allah pharmacy platform, which is part of the upper menu bar navigation. This section provides a clear summary of the products selected for purchase, with each item displayed alongside its name, adjustable quantity selectors, and individual price. The design of the cart enables users to easily increase or decrease the quantity of each item, with the total cost dynamically updating to reflect changes.

Additionally, on the right-hand side, there is a section to 'Enter Promo Code'. Customers can apply codes like "nadaebrahim" to avail special discounts, such as a 500 EGP deduction on orders exceeding 500 EGP, enhancing the shopping experience with savings opportunities.

Below the promo code area, the interface neatly summarizes the financial details of the order: the initial total, delivery fees, applicable taxes, and the final subtotal after any discounts are applied. The 'Checkout' button is prominently displayed, inviting users to proceed with the secure payment process after reviewing their cart. This layout is designed for ease of use, ensuring that all necessary information is transparent, and the checkout process is as intuitive as possible.

![WhatsApp Image 2023-12-15 at 7 59 41 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/346acbbe-8541-4c65-8acf-aa373f9777ee)

The image depicts the 'Chat' feature of Khaleeha Ala Allah pharmacy platform, a section designed to facilitate direct communication between patients and pharmacists. On the left side of the interface, there is a list of available pharmacists, each with a profile icon and name, making it easy for users to identify and select a professional to converse with.

The main panel displays the active conversation window with a pharmacist named Mahmoud, where the exchange of messages can be seen. This conversation layout is familiar and intuitive, like popular messaging apps, ensuring users can comfortably navigate and use it without a steep learning curve.

At the bottom of the chat window, there is a text input field where users can type their messages, accompanied by attachment and send icons, allowing for a comprehensive communication experience that can include sending text, images, or other files.

This chat functionality underscores the platform's commitment to providing real-time, personalized support to its users. It enhances the service by offering accessible healthcare advice, thus bridging the gap between online shopping and professional healthcare consultation.

![WhatsApp Image 2023-12-15 at 8 00 42 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/d94273ce-e46c-43e6-a0b2-b23c70c81e36)

The image shows the 'Change Password' page from Khaleeha Ala Allah pharmacy platform, a crucial part of user account management. This interface is designed for simplicity and security, with clear fields for entering the current password, the new password, and a confirmation of the new password to ensure accuracy.

The process is straightforward:

- The user enters their 'Current Password' to verify their identity.
- They then type in a 'New Password' following the platform's security guidelines.
- Finally, the user is required to 'Confirm Password' to prevent any typing errors.

Once all fields are completed, the user can finalize the update by clicking the 'Change Password' button, which is highlighted in blue to draw attention. This process is integral to maintaining account security, allowing users to regularly update their passwords and safeguard their personal and medical information on the platform.

![pharmacistHomePage](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/5844aca8-54ab-48d6-8d74-ab904bdd6051)

The above image showcases the home page tailored for pharmacists on Khaleeha Ala Allah online pharmacy platform. This intuitive dashboard is the cornerstone for pharmacists to navigate their professional tasks and interact with the patient community effectively. The 'View Medicines' section on this page is a critical feature, where pharmacists can review and manage the details of medications, keeping abreast of the inventory and information pertinent to patient care.

Adjacent to this, the 'ADD Medicine' function provides an essential tool for pharmacists to expand the platform's medicinal offerings. This feature not only enables the addition of new products to the pharmacy's portfolio but also allows for the arrangement of consultations with patients, ensuring that pharmacists can offer personalized care at any time. Moreover, an anticipated feature highlighted on the home page, 'Chat with Doctor', signifies the upcoming capability for pharmacists to seek instant advice from medical professionals through a secure messaging system, a step that promises to enhance the collaborative aspect of patient care.

Navigation is made effortless with a simple top bar, granting easy access to various sections such as 'Home', 'Manage Medicines', 'Wallet', and 'Chat'. These links are strategically placed to ensure a smooth transition between different tasks, embodying the platform's dedication to a seamless user experience.

The design of the pharmacist home page on Khaleeha Ala Allah platform is a testament to the thoughtful consideration of the pharmacist's workflow, aiming to create a harmonious balance between efficiency and user-centric design, which is paramount in the fast-paced environment of healthcare.

![viewMedecines](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/32d14143-0ade-42be-98e9-0f79ba45c193)

The image provides a detailed view of the 'View Medicines' interface on Khaleeha Ala Allah online pharmacy platform, accessible to pharmacists after logging in. This page is a critical component of the platform, allowing pharmacists to efficiently manage their medicine inventory.

At the top, the interface includes toggle options for pharmacists to filter the medicine list between 'Show Available Medicines' and 'Show All Medicines', enabling them to streamline their view according to stock levels. A search bar offers the convenience of quickly locating a specific medicine by name, enhancing the user experience through quick navigation.

The central part of the screen displays a table that lists the medicines with corresponding images, names, prices, available quantities, and sales records. This tabular presentation is designed for quick scanning and easy understanding of the inventory status and sales performance of each product. Each row in the table is interactive, and clicking on it reveals more detailed information about the medicine, such as its description, indicating the platform's emphasis on ease of access to detailed data.

An 'Archive' button accompanies each medicine entry, providing pharmacists with the capability to effortlessly remove products from active listings, an essential feature for maintaining current and accurate stock information. The layout of the 'View Medicines' page is meticulously organized, reflecting the platform's commitment to providing a user-friendly and functional environment for pharmacy professionals to administer their medicinal offerings.

![chathome](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/53b5fd1c-e6bb-4269-a75a-e949b98daddf)

The image illustrates the "Chat" home page of Khaleeha Ala Allah online pharmacy platform, where communication between healthcare professionals and patients is streamlined. This specific section is designed to facilitate conversation, offering a user-friendly environment for real-time interaction.

Featured prominently on the page is a toggle switch that allows users to switch between viewing "Patients" and "Doctors," indicating the platform's dual communication channels. This feature provides users with the flexibility to engage in discussions with either patients or fellow medical practitioners as needed. The interface, in its simplicity, supports a clear and undistracted user experience.

For instance, the current view shows "magdy hussien" listed under the "Patients" tab, suggesting that healthcare providers can select a patient to start a dialogue. The layout, with its ample space and clean lines, emphasizes the platform's commitment to an organized and efficient communication process.

The overall design of the "Chat" home page, with its functional clarity and streamlined approach, reflects the platform's dedication to providing a seamless and effective communication tool for its users, ensuring that important conversations can be conducted in a conducive environment.

![WhatsApp Image 2023-12-15 at 9 43 04 PM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/060f03ad-51cc-4cd7-a514-f7387d618781)

The provided image depicts the interactive chat interface of Khaleeha Ala Allah online pharmacy platform, highlighting the actual conversation area where pharmacists and patients engage in dialogue. The left side of the interface maintains a list of conversations, currently displaying "magdy hussien" as an active chat, signifying that pharmacists can easily manage multiple conversations with different patients in one consolidated view.

The main chat window is a clean and focused space where the conversation unfolds, with speech bubbles showing the exchange of messages. This minimalist design ensures that the user's attention remains on the communication itself, free from visual clutter. At the bottom, a simple input field invites users to type their message, and the send icon is intuitively placed for ease of use.

The chat interface is designed to mimic the familiar layout of popular messaging applications, which helps reduce the learning curve and enhances user comfort. It's evident that the platform prioritizes efficient communication, evident by the streamlined design that facilitates clear and quick exchanges between pharmacists and their patients.

![WhatsApp Image 2023-12-16 at 4 50 53 AM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/1b17e5a8-af63-4ebd-b5eb-32b652e2a3e5)

The image portrays the home page for administrators on Khaleeha Ala Allah online pharmacy platform. This central dashboard is where administrators can oversee various aspects of the platform's operations. The page is segmented into distinct panels for different administrative functions, each with a 'Details' link providing more in-depth information.

In one section, 'Manage admins', administrators can add new administrative users to the system, ensuring that the management team can grow or change as needed. Another panel, 'Manage Pharmacist/Patient', offers administrators the tools to review and manage the profiles and expertise of all users, be they patients or pharmacists, which is essential for maintaining the integrity and quality of the platform.

Additionally, there's a section for 'View Pending Pharmacists' which likely pertains to the approval process for new pharmacists awaiting verification. This function is crucial for controlling the entry of new professionals onto the platform, ensuring that only qualified individuals can provide services.

Lastly, the 'View Medicines' panel provides a straightforward route for administrators to monitor the entire catalog of medicines available on the platform, an important aspect of managing the pharmaceutical offerings to end users.

The design of the admin home page is clean and intuitive, providing a high-level overview of critical management tasks with ease of access, reflecting the platform's commitment to streamlined administration and oversight.

![WhatsApp Image 2023-12-16 at 4 50 53 AM (1)](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/32dd2137-1c7e-412b-b9d9-17ded438c37e)

The image represents the 'Manage Admins' page within the administrative section of the "Khaleeha Ala Allah" online pharmacy platform. It is a dedicated space for overseeing the platform's administrators, allowing for high-level control and management of backend users.

At the forefront is an 'Add Admin' button, a clear call to action that invites the primary administrator to add new admins to the system. This function is essential for expanding the administrative team or replacing members who may be leaving.

The central part of the page lists the usernames of current administrators, here showing a user "mego." Each username is accompanied by an 'Actions' column, equipped with tools such as delete or edit, allowing for quick and easy modifications to admin privileges and access. A search bar is also provided to filter through the admin list, making it simple to find specific users within the system.

This 'Manage Admins' page is designed with simplicity and functionality in mind, ensuring that the platform's administrative oversight is as efficient and streamlined as possible.

![WhatsApp Image 2023-12-16 at 4 50 53 AM (2)](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/48b08ffb-f1dc-4ce7-bcbc-d92761c9f1e2)

The image depicts the 'Manage Pharmacists' page of the Khaleeha Ala Allah online pharmacy platform, providing administrators with a comprehensive view of the pharmacists registered on the platform. This interface is designed for administrative staff to oversee the details of the pharmacists, including their names, usernames, email addresses, gender, specialties, and the current status of their account, whether accepted or pending.

This page is an essential tool for administrators as it enables them to conduct a detailed review of each pharmacist's credentials and professional information. A search bar at the top allows for quick filtering, making it easier to find specific individuals based on username. In the 'Actions' column, administrators have the ability to perform actions such as approving pending applications or editing existing pharmacist profiles

The inclusion of gender and specialty columns in the table is particularly helpful for ensuring a diverse range of professionals and expertise are available through the platform. The 'Status' column is crucial for tracking the verification process, allowing administrators to maintain a high standard of service by ensuring that only qualified pharmacists are approved.

Overall, the 'Manage Pharmacists' page is a key component of the platform's administrative backend, crafted to facilitate efficient management and oversight of pharmacist registrations and profiles.

![WhatsApp Image 2023-12-16 at 4 50 55 AM (1)](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/80792657-c6ba-4c76-82fe-c8c609ba8d77)


The image shows the 'Pending Pharmacists' section of Khaleeha Ala Allah online pharmacy platform, a crucial administrative tool for overseeing and managing new pharmacist registrations. In this interface, administrators can review applications from pharmacists who wish to join the platform, verifying their credentials before granting them access.

The table displays each applicant's name, birthdate, affiliation, specialty, and educational background, providing a comprehensive snapshot of their professional qualifications. The information is laid out in a clear, tabulated format, allowing for quick assessment of each candidate's suitability.

On the right side, two options are presented for each entry: 'Approve' and 'Reject'. These buttons give administrators the ability to accept or decline the pharmacist's application based on the provided information. This streamlined approach to approval ensures that only qualified pharmacists are able to contribute to the platform, maintaining the high standard of service expected by patients using the "Khaleeha Ala Allah" online pharmacy.

The design of the 'Pending Pharmacists' page is focused on functionality, prioritizing ease of use to facilitate the administrative process and ensure the integrity of the pharmacy services offered through the platform.

![WhatsApp Image 2023-12-16 at 4 50 55 AM](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/81e4396b-cf80-42eb-8113-5609b1471e31)

The image illustrates the 'View Medicines' section of the administrative dashboard on Khaleeha Ala Allah online pharmacy platform, accessible only to administrators. This interface is a vital part of the platform's back-end, where administrators have the ability to oversee the full inventory of medicines.

Administrators are provided with tools to refine their search within the inventory, using the toggle to display either 'Show Available Medicines' or 'Show All Medicines', which helps in managing stock levels effectively. A search functionality is also included for efficiency, allowing for quick filtering through the medicine listings by name.

The medicines are presented in a table that lists out key details such as the medicine's image, name, price, the quantity available, and the volume of sales. This organized presentation aids administrators in quickly assessing the status of the pharmacy's inventory. Each row in the table is clickable, likely offering a more detailed view of the medicine's profile and administrative options such as updating or removing listings from the inventory.

![WhatsApp Image 2023-12-16 at 4 50 54 AM (1)](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/c4684fe2-d5cb-4554-ac10-656db25afa4e)

The image displays the 'Change Password' interface for administrators on the "Khaleeha Ala Allah" online pharmacy platform. This secure page is where administrators can update their login credentials, an essential aspect of maintaining the platform's security protocols.

The interface is straightforward and user-friendly, consisting of three main fields: 'Current Password', where the admin enters their existing password; 'New Password', for entering a new password; and 'Confirm Password', which requires re-entry of the new password to ensure accuracy and prevent typing errors.

Once the necessary fields are filled, the 'Change Password' button at the bottom, highlighted in blue, is designed to be prominent and easily clickable, finalizing the password change process. This system not only upholds security standards but also empowers administrators to regularly update their passwords, thereby enhancing the overall security of the platform.

# Tech/Framework Used

**Frontend:**

- React.js

- MUI

- Ant Design

- CSS for styling

**Backend:**

- Node.js with Express framework

- MongoDB for database

**Authentication:**

- JSON Web Tokens (JWT)

**Testing:**

- Postman for API testing

**CI/CD:**

- GitHub Actions for continuous integration

**Version Control:**

- Git

**Other Tools:**

- Prettier for code formatting

# Features

 **Patient Features**

- Login with username and password.
- Logout.
- Change password.
- Reset a forgotten password through OTP sent to email.
- View a list of all available medicines (including pictures, prices, descriptions).
- Search for medicine based on name.
- Filter medicines based on medicinal use.
- Add over-the-counter medicine to the cart.
- Add prescription medicine to the cart based on the prescription.
- View cart items.
- Remove an item from the cart.
- Change the amount of an item in the cart.
- Checkout orders.
- Add new delivery addresses.
- Choose a delivery address from available options.
- Choose payment method (wallet, credit card, or cash on delivery).
- View current and past orders.
- View order details and status.
- Cancel an order.
- View alternatives to out-of-stock medicines based on the main active ingredient.
- View the amount in the wallet.
- Chat with a pharmacist.

 **Pharmacist Features**

- Login with username and password.
- Logout.
- Upload and submit required documents upon registration (ID, pharmacy degree, working licenses).
- Change password.
- Reset a forgotten password through OTP sent to email.
- View a list of all available medicines.
- View the available quantity and sales of each medicine.
- Search for medicine based on name.
- Filter medicines based on medicinal use.
- Add a medicine with details, price, and available quantity.
- Upload medicine images.
- Edit medicine details and price.
- Archive/unarchive a medicine.
- View total sales report based on a chosen month.
- Filter sales report based on a medicine/date.
- Chat with a doctor.
- View the amount in the wallet.
- Receive notifications when a medicine is out of stock.

 **Admin Features**

- Login with username and password.
- Logout.
- Add another administrator with a set username and password.
- Remove a pharmacist/patient from the system.
- View information uploaded by a pharmacist applying to join the platform.
- Accept or reject a pharmacist's request to join the platform.
- Change password.
- Reset a forgotten password through OTP sent to email.
- View a list of all available medicines.
- Search for medicine based on name.
- Filter medicines based on medicinal use.
- View a total sales report based on a chosen month.
- View a pharmacist's information.
- View a patient's basic information.

 # Code Examples

**Example 1 (Log in):**

```javascript
exports.login = async (req, res) => {
  try {
    const { username, password } = req.body;
    // Check if user exists
    let user = await userModel.findOne({ username });
    if (!user) {
      return res.status(400).json({ error: "User does not exist" });
    }
    // Validate password
    const validPassword = await bcrypt.compare(password, user.password);
    if (!validPassword) {
      return res.status(400).json({ error: "Invalid password" });
    }
    // Generate token
    const token = generateToken(user._id, user.role);
    // Check if user is not verified, send OTP
    if (!user.verified) {
      let email;
      if (user.role === "pharmacist") {
        let pharmacist = await pharmacistModel.findOne({ userID: user._id });
        email = pharmacist.email;
      } else if (user.role === "patient") {
        let patient = await patientModel.findOne({ userID: user._id });
        email = patient.email;
      } else {
        return res.status(500).json({ error: "Internal server error" });
      }
      await this.sendOTP(email, user._id);
      return res.status(400).json({
        error: "User not verified yet",
        token: token,
        role: user.role,
      });
    }
    // Additional checks and response
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
};


const Login = () => {
  const { role } = useAuth();
  const [username, setUsername] = useState("");
  const [password, setPassword] = useState("");
  const navigate = useNavigate();
  const [formVisible, setFormVisible] = useState(false);

  useEffect(() => {
    if (role) {
      switch (role) {
        case "patient":
          navigate("/patientHome");
          break;
        case "pharmacist":
          navigate("/pharmacistHome");
          break;
        case "admin":
          navigate("/adminHome");
          break;
        case "notVerified":
          navigate("/verifyUser");
          break;
        case "notApproved":
          navigate("/notApproved");
          break;
        default:
          navigate("/");
      }
    }
  }, [role, navigate]);

  useEffect(() => {
    // Use a setTimeout to set formVisible to true after 2 seconds
    const timeout = setTimeout(() => {
      setFormVisible(true);
    }, 800);
    // Clear the timeout when the component unmounts
    return () => clearTimeout(timeout);
  }, []);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!username || !password) {
      message.error("Please fill all the fields");
      return;
    }

    const data = {
      username: username,
      password: password,
    };

    await axios
      .post("http://localhost:4002/users/login", data)
      .then(async (res) => {
        const token = res.data.token;
        const role = res.data.role;
        await localStorage.setItem("token", token);
        message.success("Login Successful");
        // Navigation based on role
      })
      .catch(async (err) => {
        console.log(err.response.data.error);
        // Error handling based on the response
      });
  };

  return (
    <div className={`login ${formVisible ? "form-visible" : ""}`}>
      <div className="logo-container">
        <img src={logoImage} alt="Logo" className="logo" />
      </div>
      <div className="login-form-container">
        <form className="login-form" onSubmit={handleSubmit}>
          // Form fields and buttons
        </form>
        // Additional links
      </div>
    </div>
  );
};


**Example 2 ( Add to cart ) :**

exports.addToCart = async function (req, res) {

const medicineId = req.body.medicineId;

const quantity = parseInt(req.body.quantity);

if (isNaN(quantity) || quantity \<= 0) {

return res

.status(400)

.json({ error: "Quantity must be a positive number." });

}

console.log("ALLL");

try {

const patientId = req.user.\_id; // Accept patient ID as input

console.log(patientId);

if (!patientId) {

return res.status(404).json({

status: "fail",

message: "Patient not found",

});

}

console.log("patient found");

// Find the patient by ID (replace this with your actual patient model and field)

console.log(patientId);

const patient = await Patient.findOne({ userID: patientId });

//console.log(patient);

if (!patient) {

return res.status(404).json({ error: "Patient not found." });

}

// Find the medicine by ID

const medicine = await Medicine.findById(medicineId);

console.log(medicine);

if (!medicine) {

return res.status(404).json({ error: "Medicine not found." });

}

// Check if the medicine is available

if (medicine.availableQuantity === 0) {

return res.status(400).json({ error: "Medicine is not available." });

} else if (medicine.availableQuantity \< quantity) {

return res

.status(400)

.json({ error: "Medicine Quantity is not available." });

}

// Calculate the total price for the cart item

const totalItemPrice = medicine.price \* quantity;

// Check if the patient already has a cart

let cart = await Cart.findOne({ user: patientId });

if (!cart) {

// Create a new cart if the patient doesn't have one

cart = new Cart({

user: patientId,

items: [],

totalAmount: 0,

});

}

// Check if the medicine is already in the cart

const existingCartItem = cart.items.find(

(item) =\> item.medicine.toString() === medicineId

);

if (existingCartItem) {

// Update the quantity and total price

existingCartItem.quantity += quantity;

existingCartItem.totalPrice += medicine.price \* quantity;

} else {

// Add the medicine as a new item

const totalItemPrice = medicine.price \* quantity;

const cartItem = {

medicine: medicineId,

quantity: quantity,

totalPrice: totalItemPrice,

};

cart.items.push(cartItem);

}

// Update the totalAmount in the cart

cart.totalAmount = cart.items.reduce(

(total, item) =\> total + item.totalPrice,

0

);

// Save the cart

await cart.save();

res.status(200).json({ message: "Medicine added to cart successfully." });

} catch (error) {

res

.status(500)

.json({ error: "An error occurred while adding medicine to the cart." });

}

};

exports.viewCartItems = async function (req, res) {

try {

const patientId = req.params.id;

const patient = await Patient.findOne({ userID: patientId });

if (!patient) {

return res.status(404).json({ error: "Patient not found." });

}

const cart = await Cart.findOne({ user: patientId }).populate(

"items.medicine"

);

if (!cart) {

return res.status(404).json({ error: "Cart not found." });

}

res.status(200).json({ success: true, cart: cart });

} catch (error) {

console.error("Error fetching cart items:", error);

res.status(500).json({ success: false, error: "Internal server error." });

}

};

```
**Example 2 (Add to Cart and View Cart Items):**

```javascript
exports.addToCart = async function (req, res) {
  const medicineId = req.body.medicineId;
  const quantity = parseInt(req.body.quantity);

  if (isNaN(quantity) || quantity <= 0) {
    return res.status(400).json({ error: "Quantity must be a positive number." });
  }

  try {
    const patientId = req.user._id; // Accept patient ID as input
    const patient = await Patient.findOne({ userID: patientId });

    if (!patient) {
      return res.status(404).json({ error: "Patient not found." });
    }

    const medicine = await Medicine.findById(medicineId);

    if (!medicine) {
      return res.status(404).json({ error: "Medicine not found." });
    }

    // Check if the medicine is available
    if (medicine.availableQuantity === 0) {
      return res.status(400).json({ error: "Medicine is not available." });
    } else if (medicine.availableQuantity < quantity) {
      return res.status(400).json({ error: "Medicine Quantity is not available." });
    }

    // Calculate the total price for the cart item
    const totalItemPrice = medicine.price * quantity;

    // Check if the patient already has a cart
    let cart = await Cart.findOne({ user: patientId });

    if (!cart) {
      cart = new Cart({
        user: patientId,
        items: [],
        totalAmount: 0,
      });
    }

    // Check if the medicine is already in the cart
    const existingCartItem = cart.items.find(
      (item) => item.medicine.toString() === medicineId
    );

    if (existingCartItem) {
      existingCartItem.quantity += quantity;
      existingCartItem.totalPrice += medicine.price * quantity;
    } else {
      const cartItem = {
        medicine: medicineId,
        quantity: quantity,
        totalPrice: totalItemPrice,
      };
      cart.items.push(cartItem);
    }

    // Update the totalAmount in the cart
    cart.totalAmount = cart.items.reduce(
      (total, item) => total + item.totalPrice,
      0
    );

    // Save the cart
    await cart.save();
    res.status(200).json({ message: "Medicine added to cart successfully." });
  } catch (error) {
    res.status(500).json({ error: "An error occurred while adding medicine to the cart." });
  }
};

exports.viewCartItems = async function (req, res) {
  try {
    const patientId = req.params.id;
    const patient = await Patient.findOne({ userID: patientId });

    if (!patient) {
      return res.status(404).json({ error: "Patient not found." });
    }

    const cart = await Cart.findOne({ user: patientId }).populate("items.medicine");

    if (!cart) {
      return res.status(404).json({ error: "Cart not found." });
    }

    res.status(200).json({ success: true, cart: cart });
  } catch (error) {
    console.error("Error fetching cart items:", error);
    res.status(500).json({ success: false, error: "Internal server error." });
  }
};
```
# Installation

Follow these steps to set up and run the frontend and backend of the project.

 **Frontend Installation**

1. **Clone the Repository**

   First, clone the repository to your local machine:

   ```bash
   git clone https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy
   ```

2. **Open the Folder**

   Navigate to the project directory:

   ```bash
   cd khaleha-ala-alah-Pharmacy
   ```

3. **Install Frontend Dependencies**

   Change to the frontend directory and install the necessary dependencies:

   ```bash
   cd react-app
   npm i
   ```

4. **Start the Frontend**

   Start the frontend application:

   ```bash
   npm start
   ```

   This should launch the frontend of your application in your default web browser.

 **Backend Installation**

1. **Install Backend Dependencies**

   Navigate to the backend directory from the root of the project:

   ```bash
   cd server
   npm i
   ```

2. **Start the Backend Server**

   Start the backend server in development mode:

   ```bash
   npm run start:dev
   ```

   The backend server should now be running and listening for requests.

# How to Use

In this section, you'll find step-by-step instructions on how to use and configure the project using the provided environment variables.

 **Prerequisites**

Before you begin, make sure you have the following prerequisites:

- [Node.js](https://nodejs.org/): Ensure you have Node.js installed to run the project.

Create an .env file in the root of the project and add the following environment variables:

```bash
NODE_ENV=development
PORT=4002
DATABASE=mongodb+srv://magdy_hussien:<DATABASE_PASSWORD>@cluster0.vftrsrv.mongodb.net/el7a2ni
USERNAME=magdy
DATABASE_PASSWORD=Mm123456
JWT_SECRET=Khleeha-Ala-Allah

```
**Start the Frontend**

   Start the frontend application:

   ```bash
   npm start
   ```

   This should launch the frontend of your application in your default web browser.


 **Start the Backend Server**

   Start the backend server in development mode:

   ```bash
   npm run start:dev
   ```

   The backend server should now be running and listening for requests.

 # API Refrences

This section provides a detailed overview of the available API endpoints for our application. The API is structured around REST principles, delivering access to resources such as messages, conversations, admins, patients, pharmacists, and other entities. Authentication is required for most endpoints, ensuring secure access and operations.

## Authentication

POST /login: User login

POST /validateToken: Validate user token

POST /verifyUser: Verify user account

POST /changePassword: Change user password (Authenticated)

POST /forgotPassword: User forgot password

POST /resetPassword: Reset user password

## User Management

POST /register: Register a new user

GET /getUsers: Get all users (Authenticated)

GET /getUserID: Get user ID (Authenticated)

POST /getUser: Get specific user details (Authenticated)

## Messages

GET /notifications: Get message notifications (Authenticated)

POST /: Create a message

GET /:conversationId: Get messages for a conversation

## Conversations

POST /: Create a conversation

GET /: Get all conversations

POST /deleteMessagesNotification: Delete messages notification


## Admin Management

GET /: Get all admins

POST /addAdmin: Add a new admin

DELETE /delAdminpharmacistPatient: Delete admin, pharmacist, or patient

POST /approveOrRejectDoctor: Approve or reject pharmacist

GET /getCurrentAdmin: Get current admin details (Authenticated)

GET /pendingDoctors: View pending pharmacists

## Medicine Management

GET /allmedicinesdyuse: Get medicines by medical use

GET /available-medicines: Get available medicines

GET /medicine-sales-report/:year/:month: Get medicine sales report

## Pharmacist Management

GET /:pharmacistId/PharmacistDetails: Get pharmacist details by ID

GET /allpharmacists: Get all pharmacists

POST /addMedicine: Add medicine (Authenticated)

GET /:medicineId/medicine-details: Get medicine details

PATCH /updatePharmacist: Update pharmacist details (Authenticated)

PUT /:medicineId/edit-medicine: Edit medicine details

PATCH /archiveMedicine: Archive medicine

PATCH /unarchiveMedicine: Unarchive medicine

## Patient Management

POST /checkout: Checkout process (Authenticated)

GET /: Get all patients

GET /currentPatient: Get current patient details (Authenticated)

GET /filterMedicine: Filter medicine

GET /searchmedicine: Search medicine by name

GET /myOrders/:status: Get patient orders by status (Authenticated)

GET /myorderDetails/: Get order details (Authenticated)

PATCH /cancel-order/:orderID: Cancel order (Authenticated)

GET /getOrderMedicine: Get order medicine

GET /allMediciness: Get all medicines

GET /mydoctors: Get patient's pharmacists (Authenticated)

GET /:id: Get patient details

PATCH /add-family-members: Add family members (Authenticated)

POST /add-amount-Wallet: Add amount to wallet

POST /remove-from-wallet: Remove amount from wallet

GET /amount-wallet/:userID: Get wallet amount (Authenticated)

POST /:userId/add-address: Add address

DELETE /:userId/delete-address/:addressIndex: Delete address

GET /:userId/get-all-addresses: Get all addresses for a user

## Cart and Payments

GET /viewcartitems/:id: View cart items (Authenticated)

POST /save-stripe-token: Process payment for package

POST /add-to-cart: Add item to cart (Authenticated)

DELETE /remove-from-cart/:medicineId: Remove item from cart (Authenticated)

PUT /change-item-quantity/:medicineId: Change item quantity in cart (Authenticated)

# Tests

Throughout the development of our API, we extensively utilized Postman for testing and validating our endpoints. Postman, a popular API client, enabled us to efficiently test each API route for functionality, error handling, and response accuracy. This tool proved invaluable in ensuring that our API met the expected standards of performance and reliability. By leveraging Postmanâ€™s user-friendly interface and comprehensive testing capabilities, we were able to simulate client requests and fine-tune our API responses, ensuring a robust and dependable service for our users. In the following sections, we will provide some examples of these Postman tests to demonstrate how our API endpoints can be interacted with and tested effectively.

![TestpharmacyPatientLogIn](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/b7758845-4e9f-4a9c-95af-68c580ea156f)

The screenshot illustrates a successful login attempt using the Postman application. A POST request was sent to the '/users/login' endpoint with a JSON payload containing a username and password. The server responded with a 200 OK status, indicating that the login was successful. The response body contains a message confirming the successful login and a JWT token, which is used for authenticating subsequent requests. Additionally, the role of the logged-in user is identified as "patient" within the response payload.

![TestviewCart](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/edc0304f-aa0d-4c40-80ca-1c3e8bcc90cea)

The image shows a successful GET request made to the /patients/viewcartitems/{patientId} endpoint using Postman. The response, with a 200 OK status, indicates a successful retrieval of cart details for a patient. The JSON payload in the response body includes a success flag set to true, and a cart object containing the ID of the cart, the associated user ID, and an array of items. Each item in the array details a medicine's ID, name, image URL, price, description, sales count, available quantity, active ingredients, medical use, archival status, user ID, prescription requirement, and version number. This demonstrates the API's capability to provide detailed information about items in a patient's cart.

![TestaddToCart](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/7166c3ac-6121-4eb0-9b8b-5f28a472ec0e)

The provided image displays a POST request to the /patients/add-to-cart endpoint using Postman. The request body includes a medicineId and a quantity, indicating the intent to add a specific number of a medicine item to a patient's cart. The response returned a 200 OK status with a message stating "Medicine added to cart successfully," confirming the successful addition of the item to the patient's shopping cart. This showcases the API's functionality for updating cart contents in real-time.

![TestmyOrders](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/e8bc0e27-23f3-4f43-9573-8bdb9000683b)

The image depicts a GET request to the /patients/myOrders/Pending endpoint using Postman, which retrieves the details of pending orders for a patient. The response has a 200 OK status, suggesting a successful fetch. The JSON payload shows an order with an array of items, each including details of the medicine such as its ID, name, picture URL, price, description, quantity, and the total price. The itemized data clearly shows the order's contents, including the active ingredients and medical use, indicating the API's capability to provide comprehensive order details to the patient.

![TestcheckOut](https://github.com/advanced-computer-lab-2023/khaleha-ala-alah-Pharmacy/assets/126784831/78d2927b-a03e-4553-98bd-c678dd55a549)

The provided image showcases a POST request to the /patients/checkout endpoint made via Postman, indicating the completion of a purchase. The request payload includes the details of cart items, such as the medicine ID, quantity, and total price. The server responded with a 200 OK status, and the response body contains a confirmation message "Order placed successfully." This indicates that the checkout process was completed successfully and the order has been registered in the system.


# Contribute
We welcome contributions from the community and are pleased to have you join us. If you wish to contribute code and you have not yet done so, please review our contribution guide.

## Quickstart:
 
1- Fork the repository.

2- Clone your fork and create a new branch: git checkout -b my-branch-name.

3- Make your changes, test them, and ensure they follow the project's coding standards.

4- Commit your changes with a clear and detailed commit message.

5- Push your changes to your forked repository.

6- Open a pull request to the main branch of the original repository.

7- Provide as much information as possible with the pull request description.



If you need help, don't hesitate to ask questions in the issues section or reach out directly via our contact channels.

Thank you for your contributions!

# Credits
Our gratitude extends to the following resources and communities that have been instrumental in the development of our project:

-MongoDB Documentation: For offering comprehensive guides and references that serve as the cornerstone for designing our database architecture. [MongoDB Manual](https://www.mongodb.com/docs/)

-W3Schools MongoDB Tutorial: For providing an accessible and practical introduction to MongoDB. [W3Schools MongoDB Tutorial](https://www.w3schools.com/nodejs/nodejs_mongodb.asp)

-Node.js Documentation: For detailed documentation and API references that form the backbone of our server-side application logic. [Node.js Documentation](https://nodejs.org/en/docs/)

-React Documentation: For the official tutorials and guides that have enabled us to build dynamic and high-performing user interfaces. [React Documentation](https://reactjs.org/docs/getting-started.html)

-Ant Design Documentation: For a rich set of React UI components that have enhanced the aesthetic and functional aspects of our application. [Ant Design](https://ant.design/docs/react/introduce)


-MUI Documentation: For their robust React components that have allowed us to implement Google's Material Design in our project seamlessly. [MUI Documentation](https://mui.com/getting-started/installation/)

-Postman Documentation: For their collaborative platform and educational resources that have streamlined our API testing processes. [Postman Documentation](https://learning.postman.com/docs/getting-started/introduction/)

-GitHub Docs: For their version control platform and guides that have facilitated our collaborative development efforts. [GitHub Docs](https://docs.github.com/)

Each of these resources has played a pivotal role in our project's success, and we wholeheartedly recommend them to any aspiring or established developers looking to delve into full-stack development.




